function _typeof(k){return _typeof=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},_typeof(k)}window.Modernizr=function(k,s,B){function D(o){U.cssText=o}function J(o,t){return D(prefixes.join(o+";")+(t||""))}function O(o,t){return _typeof(o)===t}function K(o,t){return!!~(""+o).indexOf(t)}function L(o,t,e){for(var i in o){var m=t[o[i]];if(m!==B)return e===!1?o[i]:O(m,"function")?m.bind(e||t):m}return!1}var G="2.6.2",C={},z=!0,F=s.documentElement,T="modernizr",$=s.createElement(T),U=$.style,_,Q={}.toString,M={},V={},I={},q=[],R=q.slice,A,b={}.hasOwnProperty,j;!O(b,"undefined")&&!O(b.call,"undefined")?j=function(t,e){return b.call(t,e)}:j=function(t,e){return e in t&&O(t.constructor.prototype[e],"undefined")},Function.prototype.bind||(Function.prototype.bind=function(o){var t=this;if(typeof t!="function")throw new TypeError;var e=R.call(arguments,1),i=function m(){if(this instanceof m){var S=function(){};S.prototype=t.prototype;var E=new S,v=t.apply(E,e.concat(R.call(arguments)));return Object(v)===v?v:E}return t.apply(o,e.concat(R.call(arguments)))};return i}),M.canvas=function(){var o=s.createElement("canvas");return!!o.getContext&&!!o.getContext("2d")},M.canvastext=function(){return!!C.canvas&&!!O(s.createElement("canvas").getContext("2d").fillText,"function")},M.audio=function(){var o=s.createElement("audio"),t=!1;try{(t=!!o.canPlayType)&&(t=new Boolean(t),t.ogg=o.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),t.mp3=o.canPlayType("audio/mpeg;").replace(/^no$/,""),t.wav=o.canPlayType('audio/wav; codecs="1"').replace(/^no$/,""),t.m4a=(o.canPlayType("audio/x-m4a;")||o.canPlayType("audio/aac;")).replace(/^no$/,""))}catch(e){}return t},M.localstorage=function(){try{return localStorage.setItem(T,T),localStorage.removeItem(T),!0}catch(o){return!1}};for(var H in M)j(M,H)&&(A=H.toLowerCase(),C[A]=M[H](),q.push((C[A]?"":"no-")+A));return C.addTest=function(o,t){if(_typeof(o)=="object")for(var e in o)j(o,e)&&C.addTest(e,o[e]);else{if(o=o.toLowerCase(),C[o]!==B)return C;t=typeof t=="function"?t():t,typeof z!="undefined"&&z&&(F.className+=" "+(t?"":"no-")+o),C[o]=t}return C},D(""),$=_=null,function(o,t){function e(n,r){var l=n.createElement("p"),g=n.getElementsByTagName("head")[0]||n.documentElement;return l.innerHTML="x<style>"+r+"</style>",g.insertBefore(l.lastChild,g.firstChild)}function i(){var n=x.elements;return typeof n=="string"?n.split(" "):n}function m(n){var r=c[n[y]];return r||(r={},p++,n[y]=p,c[p]=r),r}function S(n,r,l){if(r||(r=t),f)return r.createElement(n);l||(l=m(r));var g;return l.cache[n]?g=l.cache[n].cloneNode():a.test(n)?g=(l.cache[n]=l.createElem(n)).cloneNode():g=l.createElem(n),g.canHaveChildren&&!d.test(n)?l.frag.appendChild(g):g}function E(n,r){if(n||(n=t),f)return n.createDocumentFragment();r=r||m(n);for(var l=r.frag.cloneNode(),g=0,N=i(),P=N.length;g<P;g++)l.createElement(N[g]);return l}function v(n,r){r.cache||(r.cache={},r.createElem=n.createElement,r.createFrag=n.createDocumentFragment,r.frag=r.createFrag()),n.createElement=function(l){return x.shivMethods?S(l,n,r):r.createElem(l)},n.createDocumentFragment=Function("h,f","return function(){var n=f.cloneNode(),c=n.createElement;h.shivMethods&&("+i().join().replace(/\w+/g,function(l){return r.createElem(l),r.frag.createElement(l),'c("'+l+'")'})+");return n}")(x,r.frag)}function u(n){n||(n=t);var r=m(n);return x.shivCSS&&!w&&!r.hasCSS&&(r.hasCSS=!!e(n,"article,aside,figcaption,figure,footer,header,hgroup,nav,section{display:block}mark{background:#FF0;color:#000}")),f||v(n,r),n}var h=o.html5||{},d=/^<|^(?:button|map|select|textarea|object|iframe|option|optgroup)$/i,a=/^(?:a|b|code|div|fieldset|h1|h2|h3|h4|h5|h6|i|label|li|ol|p|q|span|strong|style|table|tbody|td|th|tr|ul)$/i,w,y="_html5shiv",p=0,c={},f;(function(){try{var n=t.createElement("a");n.innerHTML="<xyz></xyz>",w="hidden"in n,f=n.childNodes.length==1||function(){t.createElement("a");var r=t.createDocumentFragment();return typeof r.cloneNode=="undefined"||typeof r.createDocumentFragment=="undefined"||typeof r.createElement=="undefined"}()}catch(r){w=!0,f=!0}})();var x={elements:h.elements||"abbr article aside audio bdi canvas data datalist details figcaption figure footer header hgroup mark meter nav output progress section summary time video",shivCSS:h.shivCSS!==!1,supportsUnknownElements:f,shivMethods:h.shivMethods!==!1,type:"default",shivDocument:u,createElement:S,createDocumentFragment:E};o.html5=x,u(t)}(this,s),C._version=G,F.className=F.className.replace(/(^|\s)no-js(\s|$)/,"$1$2")+(z?" js "+q.join(" "):""),C}(this,this.document),function(k,s,B){function D(e){return $.call(e)=="[object Function]"}function J(e){return typeof e=="string"}function O(){}function K(e){return!e||e=="loaded"||e=="complete"||e=="uninitialized"}function L(){var e=U.shift();_=1,e?e.t?F(function(){(e.t=="c"?t.injectCss:t.injectJs)(e.s,0,e.a,e.x,e.e,1)},0):(e(),L()):_=0}function G(e,i,m,S,E,v,d){function h(c){if(!w&&K(a.readyState)&&(p.r=w=1,!_&&L(),a.onload=a.onreadystatechange=null,c)){e!="img"&&F(function(){V.removeChild(a)},50);for(var f in j[i])j[i].hasOwnProperty(f)&&j[i][f].onload()}}var d=d||t.errorTimeout,a=s.createElement(e),w=0,y=0,p={t:m,s:i,e:E,a:v,x:d};j[i]===1&&(y=1,j[i]=[]),e=="object"?a.data=i:(a.src=i,a.type=e),a.width=a.height="0",a.onerror=a.onload=a.onreadystatechange=function(){h.call(this,y)},U.splice(S,0,p),e!="img"&&(y||j[i]===2?(V.insertBefore(a,M?null:T),F(h,d)):j[i].push(a))}function C(e,i,m,S,E){return _=0,i=i||"j",J(e)?G(i=="c"?R:q,e,i,this.i++,m,S,E):(U.splice(this.i++,0,e),U.length==1&&L()),this}function z(){var e=t;return e.loader={load:C,i:0},e}var I=s.documentElement,F=k.setTimeout,T=s.getElementsByTagName("script")[0],$={}.toString,U=[],_=0,Q="MozAppearance"in I.style,M=Q&&!!s.createRange().compareNode,V=M?I:T.parentNode,I=k.opera&&$.call(k.opera)=="[object Opera]",I=!!s.attachEvent&&!I,q=Q?"object":I?"script":"img",R=I?"script":q,A=Array.isArray||function(e){return $.call(e)=="[object Array]"},b=[],j={},H={timeout:function(i,m){return m.length&&(i.timeout=m[0]),i}},o,t;t=function(i){function m(a){var a=a.split("!"),w=b.length,p=a.pop(),y=a.length,p={url:p,origUrl:p,prefixes:a},c,f,x;for(f=0;f<y;f++)x=a[f].split("="),(c=H[x.shift()])&&(p=c(p,x));for(f=0;f<w;f++)p=b[f](p);return p}function S(d,a,w,y,p){var c=m(d),f=c.autoCallback;c.url.split(".").pop().split("?").shift(),c.bypass||(a&&(a=D(a)?a:a[d]||a[y]||a[d.split("/").pop().split("?")[0]]),c.instead?c.instead(d,a,w,y,p):(j[c.url]?c.noexec=!0:j[c.url]=1,w.load(c.url,c.forceCSS||!c.forceJS&&c.url.split(".").pop().split("?").shift()=="css"?"c":B,c.noexec,c.attrs,c.timeout),(D(a)||D(f))&&w.load(function(){z(),a&&a(c.origUrl,p,y),f&&f(c.origUrl,p,y),j[c.url]=2})))}function E(d,a){function w(l,g){if(l){if(J(l))g||(c=function(){var P=[].slice.call(arguments);f.apply(this,P),x()}),S(l,c,a,0,y);else if(Object(l)===l)for(r in n=function(){var N=0,P;for(P in l)l.hasOwnProperty(P)&&N++;return N}(),l)l.hasOwnProperty(r)&&(!g&&!--n&&(D(c)?c=function(){var P=[].slice.call(arguments);f.apply(this,P),x()}:c[r]=function(N){return function(){var P=[].slice.call(arguments);N&&N.apply(this,P),x()}}(f[r])),S(l[r],c,a,r,y))}else!g&&x()}var y=!!d.test,p=d.load||d.both,c=d.callback||O,f=c,x=d.complete||O,n,r;w(y?d.yep:d.nope,!!p),p&&w(p)}var v,u,h=this.yepnope.loader;if(J(i))S(i,0,h,0);else if(A(i))for(v=0;v<i.length;v++)u=i[v],J(u)?S(u,0,h,0):A(u)?t(u):Object(u)===u&&E(u,h);else Object(i)===i&&E(i,h)},t.addPrefix=function(e,i){H[e]=i},t.addFilter=function(e){b.push(e)},t.errorTimeout=1e4,s.readyState==null&&s.addEventListener&&(s.readyState="loading",s.addEventListener("DOMContentLoaded",o=function(){s.removeEventListener("DOMContentLoaded",o,0),s.readyState="complete"},0)),k.yepnope=z(),k.yepnope.executeStack=L,k.yepnope.injectJs=function(e,i,m,a,E,v){var u=s.createElement("script"),h,d,a=a||t.errorTimeout;u.src=e;for(d in m)u.setAttribute(d,m[d]);i=v?L:i||O,u.onreadystatechange=u.onload=function(){!h&&K(u.readyState)&&(h=1,i(),u.onload=u.onreadystatechange=null)},F(function(){h||(h=1,i(1))},a),E?u.onload():T.parentNode.insertBefore(u,T)},k.yepnope.injectCss=function(e,d,m,u,E,v){var u=s.createElement("link"),h,d=v?L:d||O;u.href=e,u.rel="stylesheet",u.type="text/css";for(h in m)u.setAttribute(h,m[h]);E||(T.parentNode.insertBefore(u,T),F(d,0))}}(this,document),Modernizr.load=function(){yepnope.apply(window,[].slice.call(arguments,0))};var PRODUCTION=1,PRODUCTION=PRODUCTION||0;function isMobile(){return window.navigator.userAgentData?window.navigator.userAgentData.mobile:/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(window.navigator.userAgent)}vim.loader=function(){"use strict";function k(){if(vim.spritesImg=document.createElement("img"),vim.spritesImg.src="images/sprites.png",vim.cloudsImg=document.createElement("img"),vim.cloudsImg.src="images/clouds.png",vim.explosionImg=document.createElement("img"),vim.explosionImg.src="images/explosion.png",PRODUCTION===0)Modernizr.load([{load:["js/dom.js","js/detect_tilde.js","js/shared/base.js","js/effect.js","js/tile.js","js/inventory.js","js/audio.js","js/game.js","js/socket.js","js/client.js","js/input.js","js/images.js","js/keys.js","js/fetcher.js","js/model.js","js/buffer.js","js/shared/textarea.js","js/email.js","js/stats.js","js/login.js","js/entities.js","js/perfect-arrows.js","js/view.js","js/vimgame.js","js/screen.game-screen.js"],complete:function(){vim.game.showScreen("game-screen")}}]);else{var s=document.createElement("script");s.onload=function(){vim.game.showScreen("game-screen")},s.async=!0,s.src="js/allinone-3f720d36fa422037ce179339698c5151.js",document.body.appendChild(s);var B=document.createElement("script");B.async=!0,B.src="https://scripts.simpleanalyticscdn.com/latest.js",document.body.appendChild(B)}}return{initialLoad:k}}();var haveKeyboard=!isMobile()||document.location.search.indexOf("non-mobile")!==-1;window.addEventListener("load",Modernizr.canvas&&haveKeyboard?vim.loader.initialLoad:Modernizr.canvas&&!haveKeyboard?function(){document.getElementById("no-keyboard").style.display="block"}:Modernizr.canvas?function(){}:function(){document.getElementById("no-canvas").style.display="block"},!1);
